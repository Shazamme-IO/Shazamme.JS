(()=>{const e="1.0.0",n={submit:"screening-question-apply"};shazamme.style(`https://sdk.shazamme.io/js/plugin/screening-question/${e}/plugin.css`).then(),shazamme.plugin={...shazamme.plugin,screeningQuestions:(t,a)=>{const s=this,i=a?.jid,l=a?.tid,o=a?.cid,r=a?.config||{},c=a?.collection||{},d=!0===a?.editing,u=a?.container||$('<div data-rel="screening-fields"></div>'),p=shazamme.bag("site-config");this.pageNumber=0,this.isValid=!0;const f=()=>{this._showQuestions(this.pageNumber+1)},g=()=>{this._showQuestions(this.pageNumber-1)},b=()=>{let e=[];this._recordAnswers();for(let n in this._answers){let t={...this._answers[n],candidateID:o};"object"==typeof t.answerUUID&&t.answerUUID.length>0?e.push(...t.answerUUID.map((e=>new Object({screeningQuestionID:t.screeningQuestionID,answerUUID:e,screeningTemplateID:t.screeningTemplateID,candidateID:o})))):e.push(t)}return{screeningTemplateID:this._screeningTemplateID,values:e}},h=e=>shazamme.site().then((n=>shazamme.submit({action:"Get Screening Answers",siteID:n.siteID,jobApplicationID:e,candidateID:o,screeningTemplateID:l}))).then((e=>{let n=[],t=this._pages[this.pageNumber||0]||[];return e?.response?.items?.forEach((e=>{n[e.screeningQuestionID]=e})),this._answers=n,this._restoreAnswers(t.map((e=>e.screeningQuestionID))),Promise.resolve(n)})),m=()=>{let e=b().values.map((e=>s._ko.find((n=>n.screeningQuestionID===e.screeningQuestionID&&("Text"===n.questionType&&e.answerText?.toLowerCase()===n.knockOutText?.toLowerCase()||"Number"===n.questionType&&e.answerNum===n.knockOutNumber||"Date"===n.questionType&&e.answerDate===n.knockOutDate||"Boolean"===n.questionType&&e.answerBoolean===n.knockOutBoolean||"List"===n.questionType&&e.answerUUID===n.knockOutList||"Multiselect Checkbox"===n.questionType&&(e.answerUUID?.indexOf(n.knockOutList)>=0||e.answerBoolean===n.knockOutBoolean)||"Radio"===n.questionType&&e.answerUUID===n.knockOutList))))).filter((e=>e));return!(e?.length>0)||(t.config().then((n=>{e.forEach((e=>{let t=n?.knockout?.find((n=>n.screeningQuestionID===e.screeningQuestionID));t?.alert?.length>0&&(p?.alertDialog({title:r?.screeningWarningTitle||"Error",message:t.alert,onClose:()=>{if(t?.redirect?.length>0){let e=d?`/site/${dudaAlias}${t.redirect}?preview=true&insitepreview=true&dm_device=desktop`:t.redirect;window.location=e}}})?.appendTo(u)||(()=>{if(alert(t.alert),t?.redirect?.length>0){let e=d?`/site/${dudaAlias}${t.redirect}?preview=true&insitepreview=true&dm_device=desktop`:t.redirect;window.location=e}})())}))})),!1)},k=()=>{let e=!0;return u.find("input[required], select[required], button[required]").each(((n,t)=>{let a=$(t);switch(a.attr("data-qtype")){case"text":case"select":{let n=a.val();e=e&&n&&n.trim().length>0;break}case"bool":e=e&&a.is(":checked");break;case"number":e=e&&!isNaN(a.val());break;case"date":{let n=Date.parse(a.val());e=e&&!isNaN(n);break}case"radio":e=e&&u.find(`input[type=radio][name=${a.attr("name")}]`).is(":checked");break;case"file":e=e&&s._answers[a.attr("data-qid")]?.answerFile?.length>0}})),e};return this._pages=[],this._maxPage=0,this._answers=[],this._screeningTemplateID=void 0,this._fetchQuestions=()=>(p?.loadingDialog()?.appendTo(u),new Promise((e=>{(d&&!i&&Promise.resolve(JSON.parse('[{"page_item_url": "question-c8672398-537f-43f4-8333-dc9cb3647d8d","data":{"screeningQuestionID": "c8672398-537f-43f4-8333-dc9cb3647d8d","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Header","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Header","helpText": "help text header","sortOrder": 1,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-cc741dcf-746a-4c09-b9cd-dd920ca18848","data":{"screeningQuestionID": "cc741dcf-746a-4c09-b9cd-dd920ca18848","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Boolean Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Boolean","helpText": "help text boolena","sortOrder": 2,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-3a821d5a-eacb-42f0-8570-a763e2533d66","data":{"screeningQuestionID": "3a821d5a-eacb-42f0-8570-a763e2533d66","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Date field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Date","helpText": "help text date","sortOrder": 3,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-a1a059c7-c4c7-49b2-9583-42f8d0e5dbf0","data":{"screeningQuestionID": "a1a059c7-c4c7-49b2-9583-42f8d0e5dbf0","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "File attachement","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "File","helpText": "help text file attachement","sortOrder": 4,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-ff81f8b5-526c-4a43-9a31-2c940d686284","data":{"screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "List Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "List","helpText": "help text list","sortOrder": 5,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "735fbde0-bfe4-4656-8726-773f0584b120","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "a5986c6b-df49-45ad-a4e0-e5de5f561f0c","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "735fbde0-bfe4-4656-8726-773f0584b120","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "a5986c6b-df49-45ad-a4e0-e5de5f561f0c","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-82984c70-8733-41e4-a6fe-044b11478b77","data":{"screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Multi Check Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": "cd4f03a7-6fc9-4413-a149-27ff8f1efccf","knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect Checkbox","helpText": "help text multi check","sortOrder": 6,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "cd4f03a7-6fc9-4413-a149-27ff8f1efccf","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "No","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "fcf3d05d-a6ba-4ef7-b99e-c0d5643bbcc2","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "cd4f03a7-6fc9-4413-a149-27ff8f1efccf","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "No","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "fcf3d05d-a6ba-4ef7-b99e-c0d5643bbcc2","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-d05ce73c-d8b7-4355-84c6-5abef43a6528","data":{"screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Radio Button","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Radio","helpText": "help text radio","sortOrder": 7,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "7768eb27-7c30-4105-b451-0bfd994b5812","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "8aadcca1-3af2-4ee2-a71a-65e2d11e8579","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "No","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "7768eb27-7c30-4105-b451-0bfd994b5812","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "8aadcca1-3af2-4ee2-a71a-65e2d11e8579","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "No","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-143386b4-2650-4b2c-b4d6-f934df354da7","data":{"screeningQuestionID": "143386b4-2650-4b2c-b4d6-f934df354da7","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Free Text Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Text","helpText": "help text free text","sortOrder": 8,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-977af240-8639-47ac-a244-9f1a5eacd96a","data":{"screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "MultiSelect List","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect List","helpText": "help text multi list","sortOrder": 9,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "5d1f79a3-0cfd-47be-9c2b-b14b023b48ac","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "34e6e720-6a84-4936-82f8-b9c1c6dba2f6","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "5d1f79a3-0cfd-47be-9c2b-b14b023b48ac","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "34e6e720-6a84-4936-82f8-b9c1c6dba2f6","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-e00713b8-00aa-4b4f-b864-e328de7e4fe7","data":{"screeningQuestionID": "e00713b8-00aa-4b4f-b864-e328de7e4fe7","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Number1","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Number","helpText": "help text number","sortOrder": 10,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-b1627441-583a-4b0d-927a-c27565289887","data":{"screeningQuestionID": "b1627441-583a-4b0d-927a-c27565289887","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Rater??","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Rater","helpText": "help text rater","sortOrder": 11,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}}]'))||l&&shazamme.fetch(c.questions).then((e=>Promise.resolve(e?.filter((e=>e.data.screeningTemplateID===l)))))||shazamme.fetch(c.jobs).then((e=>Promise.resolve(e?.find((e=>e.data.jobID===i))?.data?.screeningTemplateID))).then((e=>Promise.all([e,shazamme.fetch(c.questions)]))).then((e=>Promise.resolve(e[1]?.filter((n=>n.data.screeningTemplateID===e[0])))))).then((n=>{s._screeningTemplateID=n.at(0)?.data.screeningTemplateID,n.forEach((e=>{let n=Math.floor((parseInt(e.data.sortOrder)||0)/100);s._pages[n]=s._pages[n]||[],s._pages[n].push(e.data)}));for(let e=0;e<s._pages.length;e++)s._pages[e]||s._pages.splice(e,1);s._ko=n.filter((e=>e.data.knockOutDate||e.data.knockOutList||e.data.knockOutText||e.data.knockOutNumber||null!==e.data.knockOutBoolean)).map((e=>e.data)),e()}))}))),this._showQuestions=(e,a=!0)=>{if(e>this.pageNumber&&!k()){let e=r?.warningScreeningQuestions||"Please answer all questions";return void(p?.alertDialog({title:r?.warningScreeningQuestionsTitle||"Error",message:e})?.appendTo(u)||alert(e))}this._recordAnswers(),e>this._maxPage&&(this._maxPage=e);let i=(this._pages[e]||[]).filter((e=>!e.parentQuestionID||s._answers[e.parentQuestionID])),l=i.map((e=>s._questionEl({...e,options:e.options?.filter((n=>!e.parentQuestionID||s._answers[e.parentQuestionID].answerUUID?.indexOf(n.parentOptionID)>=0))})));u.empty().append(l).append(s._pagingElements(e)),u.find(".sq-help-text[collapsible]").each((function(e,n){let t=$(n),a=$(t).outerHeight();t.find(".text-main").attr("style",`--shaz-help-text-lines: ${r.helpTextLines||3}`),t.outerHeight()<a&&t.addClass("collapsible").on("click","[data-rel=button-show-more]",(function(){$(this);t.hasClass("expanded")?(t.find(".text-main").css({display:"-webkit-box"}),t.removeClass("expanded")):(t.find(".text-main").css({display:"block"}),t.addClass("expanded"))}))})),u.find("[data-rel=screening-page-index]").click((function(){let e=parseInt($(this).attr("data-page"))||0;s._showQuestions(e)})),u.find("[data-qtype=file]").on("click",(function(){let e=$(this),n=e.attr("data-qid");const t=shazamme.bag("site-config")?.message;shazamme.pub(t?.uploadShow,{showFiles:!0});let a=shazamme.sub(t?.uploadSubmit,(t=>{shazamme.unsub(a),shazamme.unsub(i),t?.length>0&&(s._answers[n]={screeningQuestionID:n,answerFile:t[0].content,answerFileName:t[0].name,screeningTemplateID:s._screeningTemplateID},e.hide().parents(".input-field-container").find("[data-rel=file-list]").empty().append(_fileEl(t[0]).on("click","[data-rel=action-remove]",(function(){delete s._answers[n],e.show(),$(this).parents("article").remove()}))))})),i=shazamme.sub(t?.uploadCancel,(()=>{shazamme.unsub(a),shazamme.unsub(i)}))})),this._pages[e]?.find((e=>e.parentQuestionID))&&u.find("input, select").on("change",(function(){s._recordAnswers(),s._showQuestions(e,!1)})),u.find("[data-rel=screening-apply]").click((function(){if(k())shazamme.pub(n.submit,{plugin:s,w:t});else{let e=r?.warningScreeningQuestions||"Please answer all questions";p?.alertDialog({title:r?.warningScreeningQuestionsTitle||"Error",message:e})?.appendTo(u)||alert(e)}})),a&&(u.get(0).scrollIntoView(),window.scrollBy({top:-200,behavior:"smooth"})),this._restoreAnswers(i.map((e=>e.screeningQuestionID))),this.pageNumber=e},this._questionEl=e=>{if(e.parentQuestionID?.length>0&&!(e.options?.length>0))return"";switch(e.questionType){case"Text":return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                <input class="sq-input-text-style" type="text" maxlength=${e.length||-1} autocomplete="nope" data-qtype="text" data-qid="${e.screeningQuestionID}" ${e.isMandatory?"required":""} />\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                            </div>\n                        `;case"Number":return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                <input type="number" autocomplete="nope" data-qtype="number" data-qid="${e.screeningQuestionID}" ${e.isMandatory?"required":""} />\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                            </div>\n                        `;case"Date":return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                <input type="date" autocomplete="nope" data-qtype="date" data-qid="${e.screeningQuestionID}" ${e.isMandatory?"required":""} />\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}; --shaz-showMoreShadowColor: ${r.showMoreShadowColor}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                            </div>\n                        `;case"Boolean":return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                    <p class="sq-boolean-question">\n                                        <input type="checkbox" autocomplete="nope" data-qtype="bool" data-qid="${e.screeningQuestionID}" ${e.isMandatory?"required":""}  />\n                                        ${e.question}\n                                    </p>\n                                </label>\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                            </div>\n                        `;case"List":{let n=e.options.map((e=>`<option value="${e.screeningQuestionOptionsID}">${e.label||e.option}</option>`));return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                <select data-qtype="list" data-qid="${e.screeningQuestionID}" ${e.isMandatory?"required":""}>${n.join("")}</select>\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                             </div>\n                        `}case"Multiselect List":case"Multiselect Checkbox":{let n=e.options.map((n=>`<label><input type="checkbox" autocomplete="nope" data-qtype="check-list" data-qid="${e.screeningQuestionID}" data-value="${n.screeningQuestionOptionsID}" />${n.label||n.option}</label>`));return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                                ${n.join("")}\n                             </div>\n                        `}case"Radio":{let n=e.options.map((n=>`<label class="sq-question-option"><input type="radio" data-qtype="radio" name="${e.screeningQuestionID}" data-qid="${e.screeningQuestionID}" value="${n.screeningQuestionOptionsID}" ${e.isMandatory?"required":""} />${n.label||n.option}</label>`));return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                                <div class="sq-opt-list">${n.join("")}</div>\n                             </div>\n                        `}case"File":return`\n                             <div class="input-field-container">\n                                <label class="text ${e.isMandatory?"required":""}">${e.question}</label>\n\n                                <button class="file" data-qtype="file" data-qid="${e.screeningQuestionID}" ${e.isMandatory?"required":""}>\n                                    <span class="text">${r?.uploadButtonText||"Select..."}</span>\n                                </button>\n\n                                <div class="sq-file-list" data-rel="file-list"></div>\n\n                                ${e.helpText?.length>0&&`\n                                <div class="sq-help-text" ${e.isHelpTextCollapse?"collapsible":""}>\n                                    <p class="text-main">${e.helpText||""}</p>\n                                    <div class="section-read-more" style="text-align: ${r.readMoreAlign}">\n                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${r.showMoreHelpText}</a>\n                                    </div>\n                                </div>\n                                `||""}\n                            </div>\n                        `;case"Header":return`<div class='screening-question-heading'><h3>${e.question}</h3</div>`;default:return""}},this._fileEl=e=>$(`\n                    <article class="item-file">\n                        <span class="text">${e.name||"(unknown)"}</span>\n                        <button class="action-remove" data-rel="action-remove"><span class="text">X</span></button>\n                    </article>\n                `),this._pagingElements=e=>{let n=[];if(n.push(`<div data-rel="screening-pages" class="screening-pages-container" style="--shaz-text-align: ${r.pagingButtonAlignment}">`),e>0&&n.push(`<a href='javascript:void(0);' class="button-page-nav back" data-rel='screening-page-index' data-page='${e-1}'><span class="text">${r.prevPageButton||"Back"}</span></a>`),e<this._pages.length-1?n.push(`<a href='javascript:void(0);' class="button-page-nav forward" data-rel='screening-page-index' data-page='${e+1}'><span class="text">${r.nextPageButton||"Next"}</span></a>`):r.showApply&&n.push(`<a href='javascript:void(0);' class="button-page-nav forward" data-rel='screening-apply'><span class="text">${r.applyButton||"Apply"}</span></a>`),this._pages.length>1){let t=new Array(this._maxPage+1);for(let n=0;n<t.length;n++)t[n]=`<a href='javascript:void(0);' class="button-page-index ${n===e?"active":""}" data-rel='screening-page-index' data-page='${n}'></a>`;for(let e=t.length;e<this._pages.length;e++)t[e]="<a href='javascript:void(0);' class=\"button-page-index disabled\"></a>";n.push(`<div class="sq-pages-index">${t.join("")}</div>`)}return n.push("</div>"),n.join("")},this._recordAnswers=()=>{u.find("input, select").each(((e,n)=>{let t=$(n);switch(t.attr("data-qtype")){case"text":t.val()?s._answers[t.attr("data-qid")]={screeningAnswerID:s._answers[t.attr("data-qid")]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerText:t.val(),screeningTemplateID:s._screeningTemplateID}:delete s._answers[t.attr("data-qid")];break;case"number":t.val()?s._answers[t.attr("data-qid")]={screeningAnswerID:s._answers[t.attr("data-qid")]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerNum:parseInt(t.val()),screeningTemplateID:s._screeningTemplateID}:delete s._answers[t.attr("data-qid")];break;case"date":t.val()?s._answers[t.attr("data-qid")]={screeningAnswerID:s._answers[t.attr("data-qid")]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerDate:t.val(),screeningTemplateID:s._screeningTemplateID}:delete s._answers[t.attr("data-qid")];break;case"bool":s._answers[t.attr("data-qid")]={screeningAnswerID:s._answers[t.attr("data-qid")]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerBoolean:t.is(":checked")?1:0,screeningTemplateID:s._screeningTemplateID};break;case"list":t.val()?s._answers[t.attr("data-qid")]={screeningAnswerID:s._answers[t.attr("data-qid")]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerUUID:t.val(),screeningTemplateID:s._screeningTemplateID}:delete s._answers[t.attr("data-qid")];break;case"check-list":{let e=t.attr("data-qid"),n=s._answers[e]?.answerUUID||[];t.is(":checked")?n.indexOf(t.attr("data-value"))<0&&n.push(t.attr("data-value")):n.indexOf(t.attr("data-value"))>=0&&n.splice(n.indexOf(t.attr("data-value")),1),0===n.length?delete s._answers[t.attr("data-qid")]:s._answers[e]={screeningAnswerID:s._answers[e]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerUUID:n,screeningTemplateID:s._screeningTemplateID};break}case"radio":t.is(":checked")&&(s._answers[t.attr("data-qid")]={screeningAnswerID:s._answers[t.attr("data-qid")]?.screeningAnswerID,screeningQuestionID:t.attr("data-qid"),answerUUID:t.attr("value"),screeningTemplateID:s._screeningTemplateID})}}))},this._restoreAnswers=e=>{for(let n in s._answers){let t=s._answers[n];n=n.split(":")[0],e.indexOf(n)<0||(0!==u.find(`input[data-qid=${n}]:visible, select[data-qid=${n}]:visible`).length?t.answerText||t.answerNum?u.find(`input[data-qid=${n}]`).val(t.answerText||t.answerNum):t.answerDate?u.find(`input[data-qid=${n}]`).val(t.answerDate.substr(0,10)):t.answerBoolean&&!t.answerUUID?u.find(`input[data-qid=${n}]`).attr("checked",!0):t.answerUUID?("string"==typeof t.answerUUID&&(t.answerUUID=t.answerUUID.split(",")),t.answerUUID.forEach((e=>{u.find(`input[data-qid=${n}][data-value=${e.trim()}]`).attr("checked",!0),u.find(`input[data-qid=${n}][value=${e.trim()}]`).attr("checked",!0),u.find(`select[data-qid=${n}]`).val(e.trim())}))):t.answerFile&&u.find(`input[data-qid=${n}]`).val(this._fileBlob(t.answerFile)):delete s._answers[n])}},this._readFile=e=>new Promise((n=>{let t=new FileReader;t.addEventListener("load",(()=>{n(btoa(t.result))}),!1),t.readAsBinaryString(e)})),this._fileBlob=(e,n="",t=512)=>{const a=atob(e),s=[];for(let e=0;e<a.length;e+=t){const n=a.slice(e,e+t),i=new Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);const l=new Uint8Array(i);s.push(l)}return new Blob(s,{type:n})},this._showEditor=()=>{const e=$('\n                    <div class="dialog dialog-knockout editor-only" data-rel="dialog" data-dialog="knockout">\n                        <div class="content" data-rel="dialog-content"></div>\n\n                        <div class="buttons">\n                            <button class="submit" data-rel="button-submit"><span class="text">OK</span></button>\n                            <button class="dismiss" data-rel="button-dismiss"><span class="text">Cancel</span></button>\n                        </div>\n                    </div>\n                ').appendTo(u),n=e=>`\n                    <article data-rel="knockout" data-id="${e.screeningQuestionID}">\n                        <div class="row">\n                            <label>${e.question}</label>\n                            <label>${(e=>e.knockOutDate?new Date(e.knockOutDate).toLocaleDateString():e.knockOutList?e.options?.find((n=>n.screeningQuestionOptionsID===e.knockOutList))?.option:e.knockOutText?e.knockOutText:e.knockOutNumber?e.knockOutNumber:null!==e.knockOutBoolean?e.knockOutBoolean?"Yes":"No":"")(e)}</label>\n                        </div>\n\n                        <div class="row">\n                            <label>\n                                Message\n                                <input type="text" data-rel="alert" placeholder="Sorry, we can accept you at this time." value="${e.alert||""}" />\n                            </label>\n\n                            <label>\n                                Redirect (Leave blank for no redirect)\n                                <input type="text" data-rel="redirect" placeholder="/reject" value="${e.redirect||""}" />\n                            </label>\n                        </div>\n\n                        <div class="row">\n                            <label>\n                                Enable\n                                <input type="checkbox" data-rel="enable" ${e.alert?.length>0||e.redirect?.length>0?'checked="checked"':""} />\n                            </label>\n                        </div>\n                    </article>\n                `;0!==s._ko.length&&t.config().then((a=>{e.find("[data-rel=dialog-content]").empty().append(s._ko.map((e=>n({...e,...a?.knockout?.find((n=>n.screeningQuestionID===e.screeningQuestionID))})))),u.find(".button-editor").remove(),$("<button />").text("Edit Knockout Handling").addClass("button-editor").on("click",(function(){e.toggle()})).prependTo(u);const i=e=>{let n=$(e.target);$("<input />").attr({type:"checkbox","data-rel":"enable",checked:n.is(":checked")?"checked":null}).on("click",i).appendTo(n.parent()),n.remove()};e.find("[data-rel=enable]").on("click",i),e.find("[data-rel=button-submit]").on("click",(function(){let n=a?.knockout||[];e.find("[data-rel=dialog-content] article [data-rel=enable]").each(((e,t)=>{let a=$(t).parents("article"),s=n.find((e=>e.screeningQuestionID===a.attr("data-id")));s&&n.splice(n.indexOf(s),1),$(t).is(":checked")&&n.push({screeningQuestionID:a.attr("data-id"),alert:a.find("[data-rel=alert]").val(),redirect:a.find("[data-rel=redirect]").val()})})),t.config().then((e=>t.config({...e,knockout:n}))).then((()=>{a.knockout=n})),e.toggle()})),e.find("[data-rel=button-dismiss]").on("click",(function(){e.toggle(),e.find("[data-rel=dialog-content]").empty().append(s._ko.map((e=>n({...e,...a?.knockout?.find((n=>n.screeningQuestionID===e.screeningQuestionID))})))),e.find("[data-rel=enable]").on("click",i)}))}))},t.log(`Loading plugin: screening-questions (${e})`),shazamme.bag("plugin-screening-question",{message:n,version:e}),this._fetchQuestions().then((()=>(this._showQuestions(0,!1),d&&this._showEditor(),Promise.resolve({nextPage:f,prevPage:g,answers:b,loadAnswers:h,knockout:m,container:u,validate:k,message:n,version:e}))))}}})();