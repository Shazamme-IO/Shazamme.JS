'use strict';(()=>{const u={submit:"screening-question-apply"};shazamme.style("https://sdk.shazamme.io/js/plugin/screening-question/1.0.0/plugin.css").then();shazamme.plugin={...shazamme.plugin,screeningQuestions:(n,p)=>{const e=this,w=p?.jid,g=p?.config||{},x=p?.collection||{},q=!0===p?.editing,h=p?.container||$('<div data-rel="screening-fields"></div>'),r=shazamme.bag("site-config");this.pageNumber=0;this.isValid=!0;const z=()=>{this._showQuestions(this.pageNumber+1)},A=()=>{this._showQuestions(this.pageNumber-
1)},y=()=>{let a=[];this._recordAnswers();for(let c in this._answers){let b={...this._answers[c]};"object"===typeof b.answerUUID&&0<b.answerUUID.length?a.push(...b.answerUUID.map(d=>Object({screeningQuestionID:b.screeningQuestionID,answerUUID:d,screeningTemplateID:b.screeningTemplateID}))):a.push(b)}return{screeningTemplateID:this._screeningTemplateID,values:a}},B=a=>shazamme.site().then(c=>shazamme.submit({action:"Get Screening Answers",siteID:c.siteID,jobApplicationID:a})).then(c=>{let b=[];c?.response?.items?.forEach(d=>
{b[d.screeningQuestionID]=d});this._answers=b;this._restoreAnswers();return Promise.resolve(b)}),C=()=>{let a=y().values.map(c=>e._ko.find(b=>b.screeningQuestionID===c.screeningQuestionID&&("Text"===b.questionType&&c.answerText?.toLowerCase()===b.knockOutText?.toLowerCase()||"Number"===b.questionType&&c.answerNum===b.knockOutNumber||"Date"===b.questionType&&c.answerDate===b.knockOutDate||"Boolean"===b.questionType&&c.answerBoolean===b.knockOutBoolean||"List"===b.questionType&&c.answerUUID===b.knockOutList||
"Multiselect Checkbox"===b.questionType&&(0<=c.answerUUID?.indexOf(b.knockOutList)||c.answerBoolean===b.knockOutBoolean)||"Radio"===b.questionType&&c.answerUUID===b.knockOutList))).filter(c=>c);return 0<a?.length?(n.config().then(c=>{a.forEach(b=>{let d=c?.knockout?.find(k=>k.screeningQuestionID===b.screeningQuestionID);0<d?.alert?.length&&!r?.alertDialog({title:g?.screeningWarningTitle||"Error",message:d.alert,onClose:()=>{0<d?.redirect?.length&&(window.location=q?`/site/${dudaAlias}${d.redirect}?preview=true&insitepreview=true&dm_device=desktop`:
d.redirect)}})&&(alert(d.alert),0<d?.redirect?.length&&(window.location=q?`/site/${dudaAlias}${d.redirect}?preview=true&insitepreview=true&dm_device=desktop`:d.redirect))})}),!1):!0},v=()=>{let a=!0;h.find("input[required], select[required], button[required]").each((c,b)=>{c=$(b);switch(c.attr("data-qtype")){case "text":case "select":c=c.val();a=a&&c&&0<c.trim().length;break;case "bool":a=a&&c.is(":checked");break;case "number":a=a&&!isNaN(c.val());break;case "date":c=Date.parse(c.val());a=a&&!isNaN(c);
break;case "radio":a=a&&h.find(`input[type=radio][name=${c.attr("name")}]`).is(":checked");break;case "file":a=a&&0<e._answers[c.attr("data-qid")]?.answerFile?.length}});return a};this._pages=[];this._maxPage=0;this._answers=[];this._screeningTemplateID=void 0;this._fetchQuestions=()=>{r?.loadingDialog()?.appendTo(h);return new Promise(a=>{(()=>q&&!w&&Promise.resolve(JSON.parse('[{"data": {"screeningQuestionID": "439dc355-42c7-411f-b4ff-912c1890a67a","screeningTemplateID": "4aa422f0-a7ab-4b9c-a35b-b96d5828d859","question": "Type of Role","isSubQuestion": false,"parentQuestionID": null,"addedBy": "rick@shazamme.com","addedOn": "2023-10-26T21:50:57.967","changedBy": "khris.samaniego@nymbl.app","changedOn": "2023-11-06T15:50:54.07","knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect Checkbox","helpText": null,"sortOrder": 1,"isMandatory": true,"length": null,"isHelpTextCollapse": false,"siteID": "854282ae-eebe-491b-a8fc-4ef502d60eb5","options":[{"screeningQuestionOptionsID": "d1f93da3-893c-47a1-b5c1-b056f0484de5","screeningQuestionID": "439dc355-42c7-411f-b4ff-912c1890a67a","option": "Temporary","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "ad44ff5c-a8dc-4f0e-86d5-5ce8865b6b92","screeningQuestionID": "439dc355-42c7-411f-b4ff-912c1890a67a","option": "Contract","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "7d347288-2419-4f1c-96b7-3c7a2af331e8","screeningQuestionID": "439dc355-42c7-411f-b4ff-912c1890a67a","option": "Perm","sortOrder": null,"label": null,"parentOptionID": null}]}},{"data": {"screeningQuestionID": "9a40b9c4-7e73-4a58-998a-37dbabd98207","screeningTemplateID": "4aa422f0-a7ab-4b9c-a35b-b96d5828d859","question": "Sector (parent)","isSubQuestion": false,"parentQuestionID": null,"addedBy": "rick@shazamme.com","addedOn": "2023-10-26T21:51:15.133","changedBy": "rick@shazamme.com","changedOn": "2023-11-06T20:25:55.897","knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect Checkbox","helpText": null,"sortOrder": 2,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "854282ae-eebe-491b-a8fc-4ef502d60eb5","options":[{"screeningQuestionOptionsID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d","screeningQuestionID": "9a40b9c4-7e73-4a58-998a-37dbabd98207","option": "Rail and Infrastructure","sortOrder": 1,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "2f18f423-cd6b-42de-995a-5454d0174751","screeningQuestionID": "9a40b9c4-7e73-4a58-998a-37dbabd98207","option": "Energy & Power","sortOrder": 2,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "7dcaf192-442c-42c3-b116-5c255903c624","screeningQuestionID": "9a40b9c4-7e73-4a58-998a-37dbabd98207","option": "IT & Technology","sortOrder": 3,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "8f0e5755-78d5-4863-bddb-f15037a550f4","screeningQuestionID": "9a40b9c4-7e73-4a58-998a-37dbabd98207","option": "Engineering and Manufacturing","sortOrder": 4,"label": null,"parentOptionID": null}]}},{"data": {"screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","screeningTemplateID": "4aa422f0-a7ab-4b9c-a35b-b96d5828d859","question": "Industry/Subsector","isSubQuestion": true,"parentQuestionID": "9a40b9c4-7e73-4a58-998a-37dbabd98207","addedBy": "rick@shazamme.com","addedOn": "2023-10-26T21:53:00.133","changedBy": "jeffrey@nymbl.app","changedOn": "2023-11-01T19:02:01.493","knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect Checkbox","helpText": null,"sortOrder": 3,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "854282ae-eebe-491b-a8fc-4ef502d60eb5","options":[{"screeningQuestionOptionsID": "6bde5096-9bb4-47be-bd27-6af1f83c12c0","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Manufacturing - Semi Conductive","sortOrder": null,"label": null,"parentOptionID": "8f0e5755-78d5-4863-bddb-f15037a550f4"},{"screeningQuestionOptionsID": "c76e71b9-9c60-4cfd-8b37-56f24c442647","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Software - Data & BI","sortOrder": null,"label": null,"parentOptionID": "7dcaf192-442c-42c3-b116-5c255903c624"},{"screeningQuestionOptionsID": "f6e22d5e-214e-4bb5-bd66-53f5e9a85d80","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Hardware - Support","sortOrder": null,"label": null,"parentOptionID": "7dcaf192-442c-42c3-b116-5c255903c624"},{"screeningQuestionOptionsID": "0a766489-3c63-4121-b69c-937b130371ee","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Renewables - Wind","sortOrder": null,"label": null,"parentOptionID": "2f18f423-cd6b-42de-995a-5454d0174751"},{"screeningQuestionOptionsID": "5926daae-d756-484c-9666-87bdbb377bed","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Renewables - Solar","sortOrder": null,"label": null,"parentOptionID": "2f18f423-cd6b-42de-995a-5454d0174751"},{"screeningQuestionOptionsID": "c54ae572-e77f-4dab-84e1-d9122eb861d0","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Manufacturing - Heavy Industrial","sortOrder": null,"label": null,"parentOptionID": "8f0e5755-78d5-4863-bddb-f15037a550f4"},{"screeningQuestionOptionsID": "b5cfdd70-98fe-414d-b0ca-c77b1870e3ec","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Hardware - Infrastructure","sortOrder": null,"label": null,"parentOptionID": "7dcaf192-442c-42c3-b116-5c255903c624"},{"screeningQuestionOptionsID": "79fc8770-d5d8-4f9f-910e-c3448c273971","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Engineering - Heavy Industrial","sortOrder": null,"label": null,"parentOptionID": "8f0e5755-78d5-4863-bddb-f15037a550f4"},{"screeningQuestionOptionsID": "491b95d1-b9d0-4ad7-bc63-f92d687a9588","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Software - Information & Security","sortOrder": null,"label": null,"parentOptionID": "7dcaf192-442c-42c3-b116-5c255903c624"},{"screeningQuestionOptionsID": "b46bee3a-f17e-47ed-931b-364c8490ffce","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Engineering - Semi Conductive","sortOrder": null,"label": null,"parentOptionID": "8f0e5755-78d5-4863-bddb-f15037a550f4"},{"screeningQuestionOptionsID": "91eb3748-7ba3-4762-804f-f0a787fb97bd","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Railway/LUL/Light Transit - Civils","sortOrder": 1,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"},{"screeningQuestionOptionsID": "21c13e06-2ab9-42f1-9863-96e4dface4c8","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Railway/LUL/Light Transit - Safety Critical","sortOrder": 2,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"},{"screeningQuestionOptionsID": "875ad541-8048-459e-aea0-710f766f26b1","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Railway/LUL/Light Transit - Track","sortOrder": 3,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"},{"screeningQuestionOptionsID": "33cb5642-3c7b-4761-9826-5058bb012796","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Built Environment - Highways","sortOrder": 4,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"},{"screeningQuestionOptionsID": "61f7031a-1b6b-4ab0-b2a5-f267f8aef866","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Built Environment - Airports","sortOrder": 5,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"},{"screeningQuestionOptionsID": "f132e285-e703-46ac-a3e4-6dedddd0a0a1","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Utilities - Gas","sortOrder": 6,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"},{"screeningQuestionOptionsID": "bd90317d-d135-4a15-ad1c-4ca3cde7a053","screeningQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","option": "Utilities - Water","sortOrder": 7,"label": null,"parentOptionID": "9186f3ab-3f86-4e4f-895b-1b437cb4678d"}]}},{"data": {"screeningQuestionID": "191662ea-09be-4d4d-a2b0-ac1548608afa","screeningTemplateID": "4aa422f0-a7ab-4b9c-a35b-b96d5828d859","question": "Competencies","isSubQuestion": true,"parentQuestionID": "e133c7b6-8b19-4192-9b93-6ab4b49b2890","addedBy": "rick@shazamme.com","addedOn": "2023-10-26T21:55:30.493","changedBy": "khris.samaniego@nymbl.app","changedOn": "2023-11-06T15:51:02.577","knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect Checkbox","helpText": "Enter competencies relative to the selected industry","sortOrder": 4,"isMandatory": false,"length": null,"isHelpTextCollapse": true,"siteID": "854282ae-eebe-491b-a8fc-4ef502d60eb5","options":[{"screeningQuestionOptionsID": "ca73eeb3-40cc-410e-87c9-d6c294dea7ea","screeningQuestionID": "191662ea-09be-4d4d-a2b0-ac1548608afa","option": "CPCS","sortOrder": null,"label": null,"parentOptionID": "33cb5642-3c7b-4761-9826-5058bb012796"},{"screeningQuestionOptionsID": "a5ce98e6-377d-451b-960b-c90c3cb47cb3","screeningQuestionID": "191662ea-09be-4d4d-a2b0-ac1548608afa","option": "CSCS","sortOrder": null,"label": null,"parentOptionID": "bd90317d-d135-4a15-ad1c-4ca3cde7a053"},{"screeningQuestionOptionsID": "cbf2a5ab-1182-4a63-89b1-460d3fef1e13","screeningQuestionID": "191662ea-09be-4d4d-a2b0-ac1548608afa","option": "CSCS","sortOrder": null,"label": null,"parentOptionID": "61f7031a-1b6b-4ab0-b2a5-f267f8aef866"},{"screeningQuestionOptionsID": "e1b1ecbb-55a4-43b1-aaaa-4148032bea32","screeningQuestionID": "191662ea-09be-4d4d-a2b0-ac1548608afa","option": "PTS/Sentinal","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "4347b4e2-6ef4-4f52-97db-3fb2d0bcf3ee","screeningQuestionID": "191662ea-09be-4d4d-a2b0-ac1548608afa","option": "CSCS","sortOrder": null,"label": null,"parentOptionID": "33cb5642-3c7b-4761-9826-5058bb012796"}]}}]'))||
shazamme.fetch(x.jobs).then(c=>Promise.resolve(c?.find(b=>b.data.jobID===w)?.data?.screeningTemplateID)).then(c=>Promise.all([c,shazamme.fetch(x.questions)])).then(c=>Promise.resolve(c[1]?.filter(b=>b.data.screeningTemplateID===c[0]))))().then(c=>{e._screeningTemplateID=c.at(0)?.data.screeningTemplateID;c.forEach(b=>{let d=Math.floor((parseInt(b.data.sortOrder)||0)/100);e._pages[d]=e._pages[d]||[];e._pages[d].push(b.data)});for(let b=0;b<e._pages.length;b++)e._pages[b]||e._pages.splice(b,1);e._ko=
c.filter(b=>b.data.knockOutDate||b.data.knockOutList||b.data.knockOutText||b.data.knockOutNumber||null!==b.data.knockOutBoolean).map(b=>b.data);a()})})};this._showQuestions=(a,c=!0)=>{if(a>this.pageNumber&&!v())c=g?.warningScreeningQuestions||"Please answer all questions",r?.alertDialog({title:g?.warningScreeningQuestionsTitle||"Error",message:c})||alert(c);else{this._recordAnswers();a>this._maxPage&&(this._maxPage=a);var b=(this._pages[a]||[]).filter(d=>!d.parentQuestionID||e._answers[d.parentQuestionID]).map(d=>
e._questionEl({...d,options:d.options?.filter(k=>!d.parentQuestionID||0<=e._answers[d.parentQuestionID].answerUUID?.indexOf(k.parentOptionID))}));h.empty().append(b).append(e._pagingElements(a));h.find(".sq-help-text[collapsible]").each(function(d,k){let f=$(k);d=$(f).outerHeight();f.find(".text-main").attr("style",`--shaz-help-text-lines: ${g.helpTextLines||3}`);if(f.outerHeight()<d)f.addClass("collapsible").on("click","[data-rel=button-show-more]",function(){$(this);f.hasClass("expanded")?(f.find(".text-main").css({display:"-webkit-box"}),
f.removeClass("expanded")):(f.find(".text-main").css({display:"block"}),f.addClass("expanded"))})});h.find("[data-rel=screening-page-index]").click(function(){let d=parseInt($(this).attr("data-page"))||0;e._showQuestions(d)});h.find("[data-qtype=file]").on("click",function(){let d=$(this),k=d.attr("data-qid");const f=shazamme.bag("site-config")?.message;shazamme.pub(f?.uploadShow,{showFiles:!0});let l=shazamme.sub(f?.uploadSubmit,t=>{shazamme.unsub(l);shazamme.unsub(m);0<t?.length&&(e._answers[k]=
{screeningQuestionID:k,answerFile:t[0].content,answerFileName:t[0].name,screeningTemplateID:e._screeningTemplateID},d.hide().parents(".input-field-container").find("[data-rel=file-list]").empty().append(_fileEl(t[0]).on("click","[data-rel=action-remove]",function(){delete e._answers[k];d.show();$(this).parents("article").remove()})))}),m=shazamme.sub(f?.uploadCancel,()=>{shazamme.unsub(l);shazamme.unsub(m)})});if(this._pages[a]?.find(d=>d.parentQuestionID))h.find("input, select").on("change",function(){e._recordAnswers();
e._showQuestions(a,!1)});h.find("[data-rel=screening-apply]").click(function(){if(v())shazamme.pub(u.submit,{plugin:e,w:n});else{let d=g?.warningScreeningQuestions||"Please answer all questions";r?.alertDialog({title:g?.warningScreeningQuestionsTitle||"Error",message:d})||alert(d)}});c&&(h.get(0).scrollIntoView(),window.scrollBy({top:-200,behavior:"smooth"}));this._restoreAnswers();this.pageNumber=a}};this._questionEl=a=>{if(0<a.parentQuestionID?.length&&!(0<a.options?.length))return"";switch(a.questionType){case "Text":return`
                             <div class="input-field-container">
                                <label>
                                <p class="sq-list-question">
                                    ${a.question}
                                    ${a.isMandatory?"*":""}
                                    <input class="sq-input-text-style" type="text" maxlength=${a.length||-1} autocomplete="nope" data-qtype="text" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""} />
                                </p>
                                </label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Number":return`
                             <div class="input-field-container">
                                <label>
                                <p class="sq-list-question">
                                    ${a.question}
                                    ${a.isMandatory?"*":""}
                                </p>
                                    <input type="number" autocomplete="nope" data-qtype="number" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""} />
                                </label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Date":return`
                             <div class="input-field-container">
                                <label>
                                <p class="sq-list-question">
                                    ${a.question}
                                    ${a.isMandatory?"*":""}
                                 </p>
                                    <input type="date" autocomplete="nope" data-qtype="date" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""} />

                                </label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}; --shaz-showMoreShadowColor: ${g.showMoreShadowColor}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Boolean":return`
                             <div class="input-field-container">
                                <label>
                                    <p class="sq-boolean-question">
                                        <input type="checkbox" autocomplete="nope" data-qtype="bool" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""}  />
                                        ${a.question}
                                        ${a.isMandatory?"*":""}
                                    </p>
                                </label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "List":var c=a.options.map(b=>`<option value="${b.screeningQuestionOptionsID}">${b.label||b.option}</option>`);return`
                             <div class="input-field-container">
                                <p class="sq-list-question">${a.question}</p>
                                <select data-qtype="list" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""}>${c.join("")}</select>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                             </div>
                        `;case "Multiselect Checkbox":return c=a.options.map(b=>`<label><input type="checkbox" autocomplete="nope" data-qtype="check-list" data-qid="${a.screeningQuestionID}" data-value="${b.screeningQuestionOptionsID}" />${b.label||b.option}</label>`),`
                             <div class="input-field-container">
                                <p class="sq-checklist-question">
                                    ${a.question}
                                    ${a.isMandatory?"*":""}
                                </p>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                                ${c.join("")}
                             </div>
                        `;case "Radio":return c=a.options.map(b=>`<label class="sq-question-option"><input type="radio" data-qtype="radio" name="${a.screeningQuestionID}" data-qid="${a.screeningQuestionID}" value="${b.screeningQuestionOptionsID}" ${a.isMandatory?"required":""} />${b.label||b.option}</label>`),`
                             <div class="input-field-container">
                                <p class="sq-radio-question">
                                    ${a.question}
                                    ${a.isMandatory?"*":""}
                                </p>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                                <div class="sq-opt-list">${c.join("")}</div>
                             </div>
                        `;case "File":return`
                             <div class="input-field-container">
                                <label>
                                    <p class="sq-list-question">
                                        ${a.question}
                                        ${a.isMandatory?"*":""}
                                    </p>
                                </label>

                                <button class="file" data-qtype="file" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""}>
                                    <span class="text">${g?.uploadButtonText||"Select..."}</span>
                                </button>

                                <div class="sq-file-list" data-rel="file-list"></div>

                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${g.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${g.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Header":return`<div class='screening-question-heading'><h3>${a.question}</h3</div>`;default:return""}};this._fileEl=a=>$(`
                    <article class="item-file">
                        <span class="text">${a.name||"(unknown)"}</span>
                        <button class="action-remove" data-rel="action-remove"><span class="text">X</span></button>
                    </article>
                `);this._pagingElements=a=>{let c=[];c.push(`<div data-rel="screening-pages" class="screening-pages-container" style="--shaz-text-align: ${g.pagingButtonAlignment}">`);0<a&&c.push(`<a href='javascript:void(0);' class="button-page-nav back" data-rel='screening-page-index' data-page='${a-1}'><span class="text">${g.prevPageButton||"Back"}</span></a>`);a<this._pages.length-1?c.push(`<a href='javascript:void(0);' class="button-page-nav forward" data-rel='screening-page-index' data-page='${a+
1}'><span class="text">${g.nextPageButton||"Next"}</span></a>`):g.showApply&&c.push(`<a href='javascript:void(0);' class="button-page-nav forward" data-rel='screening-apply'><span class="text">${g.applyButton||"Apply"}</span></a>`);if(1<this._pages.length){let b=Array(this._maxPage+1);for(let d=0;d<b.length;d++)b[d]=`<a href='javascript:void(0);' class="button-page-index ${d===a?"active":""}" data-rel='screening-page-index' data-page='${d}'></a>`;for(a=b.length;a<this._pages.length;a++)b[a]="<a href='javascript:void(0);' class=\"button-page-index disabled\"></a>";
c.push(`<div class="sq-pages-index">${b.join("")}</div>`)}c.push("</div>");return c.join("")};this._recordAnswers=()=>{h.find("input, select").each((a,c)=>{a=$(c);switch(a.attr("data-qtype")){case "text":a.val()?e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerText:a.val(),screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "number":a.val()?e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerNum:parseInt(a.val()),
screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "date":a.val()?e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerDate:a.val(),screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "bool":e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerBoolean:a.is(":checked")?1:0,screeningTemplateID:e._screeningTemplateID};break;case "list":a.val()?e._answers[a.attr("data-qid")]=
{screeningQuestionID:a.attr("data-qid"),answerUUID:a.val(),screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "check-list":c=a.attr("data-qid");let b=e._answers[c]?.answerUUID||[];a.is(":checked")?0>b.indexOf(a.attr("data-value"))&&b.push(a.attr("data-value")):0<=b.indexOf(a.attr("data-value"))&&b.splice(b.indexOf(a.attr("data-value")),1);0===b.length?delete e._answers[a.attr("data-qid")]:e._answers[c]={screeningQuestionID:a.attr("data-qid"),answerUUID:b,
screeningTemplateID:e._screeningTemplateID};break;case "radio":a.is(":checked")&&(e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerUUID:a.attr("value"),screeningTemplateID:e._screeningTemplateID})}})};this._restoreAnswers=()=>{for(let a in e._answers){let c=e._answers[a];a=a.split(":")[0];0===h.find(`input[data-qid=${a}]:visible, select[data-qid=${a}]:visible`).length?delete e._answers[a]:c.answerText||c.answerNum||c.answerDate?h.find(`input[data-qid=${a}]`).val(c.answerText||
c.answerNum||c.answerDate):c.answerBoolean&&!c.answerUUID?h.find(`input[data-qid=${a}]`).attr("checked",!0):c.answerUUID?("string"===typeof c.answerUUID&&(c.answerUUID=c.answerUUID.split(",")),c.answerUUID.forEach(b=>{h.find(`input[data-qid=${a}][data-value=${b.trim()}]`).attr("checked",!0);h.find(`input[data-qid=${a}][value=${b.trim()}]`).attr("checked",!0);h.find(`select[data-qid=${a}]`).val(b.trim())})):c.answerFile&&h.find(`input[data-qid=${a}]`).val(this._fileBlob(c.answerFile))}};this._readFile=
a=>new Promise(c=>{let b=new FileReader;b.addEventListener("load",()=>{c(btoa(b.result))},!1);b.readAsBinaryString(a)});this._fileBlob=(a,c="",b=512)=>{a=atob(a);const d=[];for(let f=0;f<a.length;f+=b){var k=a.slice(f,f+b);const l=Array(k.length);for(let m=0;m<k.length;m++)l[m]=k.charCodeAt(m);k=new Uint8Array(l);d.push(k)}return new Blob(d,{type:c})};this._showEditor=()=>{const a=$('\n                    <div class="dialog dialog-knockout editor-only" data-rel="dialog" data-dialog="knockout">\n                        <div class="content" data-rel="dialog-content"></div>\n\n                        <div class="buttons">\n                            <button class="submit" data-rel="button-submit"><span class="text">OK</span></button>\n                            <button class="dismiss" data-rel="button-dismiss"><span class="text">Cancel</span></button>\n                        </div>\n                    </div>\n                ').appendTo(h),
c=d=>d.knockOutDate?(new Date(d.knockOutDate)).toLocaleDateString():d.knockOutList?d.options?.find(k=>k.screeningQuestionOptionsID===d.knockOutList)?.option:d.knockOutText?d.knockOutText:d.knockOutNumber?d.knockOutNumber:null!==d.knockOutBoolean?d.knockOutBoolean?"Yes":"No":"",b=d=>`
                    <article data-rel="knockout" data-id="${d.screeningQuestionID}">
                        <div class="row">
                            <label>${d.question}</label>
                            <label>${c(d)}</label>
                        </div>

                        <div class="row">
                            <label>
                                Message
                                <input type="text" data-rel="alert" placeholder="Sorry, we can accept you at this time." value="${d.alert||""}" />
                            </label>

                            <label>
                                Redirect (Leave blank for no redirect)
                                <input type="text" data-rel="redirect" placeholder="/reject" value="${d.redirect||""}" />
                            </label>
                        </div>

                        <div class="row">
                            <label>
                                Enable
                                <input type="checkbox" data-rel="enable" ${0<d.alert?.length||0<d.redirect?.length?'checked="checked"':""} />
                            </label>
                        </div>
                    </article>
                `;0!==e._ko.length&&n.config().then(d=>{a.find("[data-rel=dialog-content]").empty().append(e._ko.map(f=>b({...f,...d?.knockout?.find(l=>l.screeningQuestionID===f.screeningQuestionID)})));h.find(".button-editor").remove();$("<button />").text("Edit Knockout Handling").addClass("button-editor").on("click",function(){a.toggle()}).prependTo(h);const k=f=>{f=$(f.target);$("<input />").attr({type:"checkbox","data-rel":"enable",checked:f.is(":checked")?"checked":null}).on("click",k).appendTo(f.parent());
f.remove()};a.find("[data-rel=enable]").on("click",k);a.find("[data-rel=button-submit]").on("click",function(){let f=[];a.find("[data-rel=dialog-content] article [data-rel=enable]:checked").each((l,m)=>{l=$(m).parents("article");f.push({screeningQuestionID:l.attr("data-id"),alert:l.find("[data-rel=alert]").val(),redirect:l.find("[data-rel=redirect]").val()})});n.config().then(l=>n.config({...l,knockout:f})).then(()=>{d.knockout=f});a.toggle()});a.find("[data-rel=button-dismiss]").on("click",function(){a.toggle();
a.find("[data-rel=dialog-content]").empty().append(e._ko.map(f=>b({...f,...d?.knockout?.find(l=>l.screeningQuestionID===f.screeningQuestionID)})));a.find("[data-rel=enable]").on("click",k)})})};n.log("Loading plugin: screening-questions (1.0.0)");shazamme.bag("plugin-screening-question",{message:u,version:"1.0.0"});return this._fetchQuestions().then(()=>{this._showQuestions(0,!1);q&&this._showEditor();return Promise.resolve({nextPage:z,prevPage:A,answers:y,loadAnswers:B,knockout:C,container:h,validate:v,
message:u,version:"1.0.0"})})}}})();