'use strict';(()=>{const v={submit:"screening-question-apply"};shazamme.style("https://sdk.shazamme.io/js/plugin/screening-question/1.0.0/plugin.css").then();shazamme.plugin={...shazamme.plugin,screeningQuestions:(q,n)=>{const e=this,z=n?.jid,A=n?.tid,w=n?.cid,h=n?.config||{},x=n?.collection||{},t=!0===n?.editing,k=n?.container||$('<div data-rel="screening-fields"></div>'),u=shazamme.bag("site-config");this.pageNumber=0;this.isValid=!0;const C=()=>{this._showQuestions(this.pageNumber+1)},D=()=>{this._showQuestions(this.pageNumber-
1)},B=()=>{let a=[];this._recordAnswers();for(let c in this._answers){let b={...this._answers[c],candidateID:w};"object"===typeof b.answerUUID&&0<b.answerUUID.length?a.push(...b.answerUUID.map(d=>Object({screeningQuestionID:b.screeningQuestionID,answerUUID:d,screeningTemplateID:b.screeningTemplateID,candidateID:w}))):a.push(b)}return{screeningTemplateID:this._screeningTemplateID,values:a}},E=a=>shazamme.site().then(c=>shazamme.submit({action:"Get Screening Answers",siteID:c.siteID,jobApplicationID:a,
candidateID:w})).then(c=>{let b=[],d=this._pages[this.pageNumber||0]||[];c?.response?.items?.forEach(f=>{b[f.screeningQuestionID]=f});this._answers=b;this._restoreAnswers(d.map(f=>f.screeningQuestionID));return Promise.resolve(b)}),F=()=>{let a=B().values.map(c=>e._ko.find(b=>b.screeningQuestionID===c.screeningQuestionID&&("Text"===b.questionType&&c.answerText?.toLowerCase()===b.knockOutText?.toLowerCase()||"Number"===b.questionType&&c.answerNum===b.knockOutNumber||"Date"===b.questionType&&c.answerDate===
b.knockOutDate||"Boolean"===b.questionType&&c.answerBoolean===b.knockOutBoolean||"List"===b.questionType&&c.answerUUID===b.knockOutList||"Multiselect Checkbox"===b.questionType&&(0<=c.answerUUID?.indexOf(b.knockOutList)||c.answerBoolean===b.knockOutBoolean)||"Radio"===b.questionType&&c.answerUUID===b.knockOutList))).filter(c=>c);return 0<a?.length?(q.config().then(c=>{a.forEach(b=>{let d=c?.knockout?.find(f=>f.screeningQuestionID===b.screeningQuestionID);0<d?.alert?.length&&!u?.alertDialog({title:h?.screeningWarningTitle||
"Error",message:d.alert,onClose:()=>{0<d?.redirect?.length&&(window.location=t?`/site/${dudaAlias}${d.redirect}?preview=true&insitepreview=true&dm_device=desktop`:d.redirect)}})?.appendTo(k)&&(alert(d.alert),0<d?.redirect?.length&&(window.location=t?`/site/${dudaAlias}${d.redirect}?preview=true&insitepreview=true&dm_device=desktop`:d.redirect))})}),!1):!0},y=()=>{let a=!0;k.find("input[required], select[required], button[required]").each((c,b)=>{c=$(b);switch(c.attr("data-qtype")){case "text":case "select":c=
c.val();a=a&&c&&0<c.trim().length;break;case "bool":a=a&&c.is(":checked");break;case "number":a=a&&!isNaN(c.val());break;case "date":c=Date.parse(c.val());a=a&&!isNaN(c);break;case "radio":a=a&&k.find(`input[type=radio][name=${c.attr("name")}]`).is(":checked");break;case "file":a=a&&0<e._answers[c.attr("data-qid")]?.answerFile?.length}});return a};this._pages=[];this._maxPage=0;this._answers=[];this._screeningTemplateID=void 0;this._fetchQuestions=()=>{u?.loadingDialog()?.appendTo(k);return new Promise(a=>
{(()=>t&&!z&&Promise.resolve(JSON.parse('[{"page_item_url": "question-c8672398-537f-43f4-8333-dc9cb3647d8d","data":{"screeningQuestionID": "c8672398-537f-43f4-8333-dc9cb3647d8d","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Header","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Header","helpText": "help text header","sortOrder": 1,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-cc741dcf-746a-4c09-b9cd-dd920ca18848","data":{"screeningQuestionID": "cc741dcf-746a-4c09-b9cd-dd920ca18848","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Boolean Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Boolean","helpText": "help text boolena","sortOrder": 2,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-3a821d5a-eacb-42f0-8570-a763e2533d66","data":{"screeningQuestionID": "3a821d5a-eacb-42f0-8570-a763e2533d66","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Date field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Date","helpText": "help text date","sortOrder": 3,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-a1a059c7-c4c7-49b2-9583-42f8d0e5dbf0","data":{"screeningQuestionID": "a1a059c7-c4c7-49b2-9583-42f8d0e5dbf0","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "File attachement","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "File","helpText": "help text file attachement","sortOrder": 4,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-ff81f8b5-526c-4a43-9a31-2c940d686284","data":{"screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "List Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "List","helpText": "help text list","sortOrder": 5,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "735fbde0-bfe4-4656-8726-773f0584b120","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "a5986c6b-df49-45ad-a4e0-e5de5f561f0c","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "735fbde0-bfe4-4656-8726-773f0584b120","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "a5986c6b-df49-45ad-a4e0-e5de5f561f0c","screeningQuestionID": "ff81f8b5-526c-4a43-9a31-2c940d686284","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-82984c70-8733-41e4-a6fe-044b11478b77","data":{"screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Multi Check Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": "cd4f03a7-6fc9-4413-a149-27ff8f1efccf","knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect Checkbox","helpText": "help text multi check","sortOrder": 6,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "cd4f03a7-6fc9-4413-a149-27ff8f1efccf","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "No","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "fcf3d05d-a6ba-4ef7-b99e-c0d5643bbcc2","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "cd4f03a7-6fc9-4413-a149-27ff8f1efccf","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "No","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "fcf3d05d-a6ba-4ef7-b99e-c0d5643bbcc2","screeningQuestionID": "82984c70-8733-41e4-a6fe-044b11478b77","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-d05ce73c-d8b7-4355-84c6-5abef43a6528","data":{"screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Radio Button","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Radio","helpText": "help text radio","sortOrder": 7,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "7768eb27-7c30-4105-b451-0bfd994b5812","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "8aadcca1-3af2-4ee2-a71a-65e2d11e8579","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "No","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "7768eb27-7c30-4105-b451-0bfd994b5812","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "Yes","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "8aadcca1-3af2-4ee2-a71a-65e2d11e8579","screeningQuestionID": "d05ce73c-d8b7-4355-84c6-5abef43a6528","option": "No","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-143386b4-2650-4b2c-b4d6-f934df354da7","data":{"screeningQuestionID": "143386b4-2650-4b2c-b4d6-f934df354da7","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Free Text Field","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Text","helpText": "help text free text","sortOrder": 8,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-977af240-8639-47ac-a244-9f1a5eacd96a","data":{"screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "MultiSelect List","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Multiselect List","helpText": "help text multi list","sortOrder": 9,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false,"screeningquestionoptions":[{"screeningQuestionOptionsID": "5d1f79a3-0cfd-47be-9c2b-b14b023b48ac","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "34e6e720-6a84-4936-82f8-b9c1c6dba2f6","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null}],"options":[{"screeningQuestionOptionsID": "5d1f79a3-0cfd-47be-9c2b-b14b023b48ac","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 1","sortOrder": null,"label": null,"parentOptionID": null},{"screeningQuestionOptionsID": "34e6e720-6a84-4936-82f8-b9c1c6dba2f6","screeningQuestionID": "977af240-8639-47ac-a244-9f1a5eacd96a","option": "option 2","sortOrder": null,"label": null,"parentOptionID": null}]}},{"page_item_url": "question-e00713b8-00aa-4b4f-b864-e328de7e4fe7","data":{"screeningQuestionID": "e00713b8-00aa-4b4f-b864-e328de7e4fe7","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Number1","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Number","helpText": "help text number","sortOrder": 10,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}},{"page_item_url": "question-b1627441-583a-4b0d-927a-c27565289887","data":{"screeningQuestionID": "b1627441-583a-4b0d-927a-c27565289887","screeningTemplateID": "1d85c583-a792-4aff-b323-f7dec578ee1a","question": "Rater??","isSubQuestion": false,"parentQuestionID": null,"knockOutDate": null,"knockOutList": null,"knockOutText": null,"knockOutNumber": null,"knockOutBoolean": null,"questionType": "Rater","helpText": "help text rater","sortOrder": 11,"isMandatory": false,"length": null,"isHelpTextCollapse": false,"siteID": "1f654fc9-5dfd-4a5c-a54f-33d494cb26cc","defaultAnswer": null,"hide": false}}]'))||
A&&shazamme.fetch(x.questions).then(c=>Promise.resolve(c?.filter(b=>b.data.screeningTemplateID===A)))||shazamme.fetch(x.jobs).then(c=>Promise.resolve(c?.find(b=>b.data.jobID===z)?.data?.screeningTemplateID)).then(c=>Promise.all([c,shazamme.fetch(x.questions)])).then(c=>Promise.resolve(c[1]?.filter(b=>b.data.screeningTemplateID===c[0]))))().then(c=>{e._screeningTemplateID=c.at(0)?.data.screeningTemplateID;c.forEach(b=>{let d=Math.floor((parseInt(b.data.sortOrder)||0)/100);e._pages[d]=e._pages[d]||
[];e._pages[d].push(b.data)});for(let b=0;b<e._pages.length;b++)e._pages[b]||e._pages.splice(b,1);e._ko=c.filter(b=>b.data.knockOutDate||b.data.knockOutList||b.data.knockOutText||b.data.knockOutNumber||null!==b.data.knockOutBoolean).map(b=>b.data);a()})})};this._showQuestions=(a,c=!0)=>{if(a>this.pageNumber&&!y())c=h?.warningScreeningQuestions||"Please answer all questions",u?.alertDialog({title:h?.warningScreeningQuestionsTitle||"Error",message:c})?.appendTo(k)||alert(c);else{this._recordAnswers();
a>this._maxPage&&(this._maxPage=a);var b=(this._pages[a]||[]).filter(f=>!f.parentQuestionID||e._answers[f.parentQuestionID]),d=b.map(f=>e._questionEl({...f,options:f.options?.filter(g=>!f.parentQuestionID||0<=e._answers[f.parentQuestionID].answerUUID?.indexOf(g.parentOptionID))}));k.empty().append(d).append(e._pagingElements(a));k.find(".sq-help-text[collapsible]").each(function(f,g){let l=$(g);f=$(l).outerHeight();l.find(".text-main").attr("style",`--shaz-help-text-lines: ${h.helpTextLines||3}`);
if(l.outerHeight()<f)l.addClass("collapsible").on("click","[data-rel=button-show-more]",function(){$(this);l.hasClass("expanded")?(l.find(".text-main").css({display:"-webkit-box"}),l.removeClass("expanded")):(l.find(".text-main").css({display:"block"}),l.addClass("expanded"))})});k.find("[data-rel=screening-page-index]").click(function(){let f=parseInt($(this).attr("data-page"))||0;e._showQuestions(f)});k.find("[data-qtype=file]").on("click",function(){let f=$(this),g=f.attr("data-qid");const l=shazamme.bag("site-config")?.message;
shazamme.pub(l?.uploadShow,{showFiles:!0});let m=shazamme.sub(l?.uploadSubmit,r=>{shazamme.unsub(m);shazamme.unsub(p);0<r?.length&&(e._answers[g]={screeningQuestionID:g,answerFile:r[0].content,answerFileName:r[0].name,screeningTemplateID:e._screeningTemplateID},f.hide().parents(".input-field-container").find("[data-rel=file-list]").empty().append(_fileEl(r[0]).on("click","[data-rel=action-remove]",function(){delete e._answers[g];f.show();$(this).parents("article").remove()})))}),p=shazamme.sub(l?.uploadCancel,
()=>{shazamme.unsub(m);shazamme.unsub(p)})});if(this._pages[a]?.find(f=>f.parentQuestionID))k.find("input, select").on("change",function(){e._recordAnswers();e._showQuestions(a,!1)});k.find("[data-rel=screening-apply]").click(function(){if(y())shazamme.pub(v.submit,{plugin:e,w:q});else{let f=h?.warningScreeningQuestions||"Please answer all questions";u?.alertDialog({title:h?.warningScreeningQuestionsTitle||"Error",message:f})?.appendTo(k)||alert(f)}});c&&(k.get(0).scrollIntoView(),window.scrollBy({top:-200,
behavior:"smooth"}));this._restoreAnswers(b.map(f=>f.screeningQuestionID));this.pageNumber=a}};this._questionEl=a=>{if(0<a.parentQuestionID?.length&&!(0<a.options?.length))return"";switch(a.questionType){case "Text":return`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                <input class="sq-input-text-style" type="text" maxlength=${a.length||-1} autocomplete="nope" data-qtype="text" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""} />
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Number":return`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                <input type="number" autocomplete="nope" data-qtype="number" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""} />
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Date":return`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                <input type="date" autocomplete="nope" data-qtype="date" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""} />
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}; --shaz-showMoreShadowColor: ${h.showMoreShadowColor}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Boolean":return`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                    <p class="sq-boolean-question">
                                        <input type="checkbox" autocomplete="nope" data-qtype="bool" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""}  />
                                        ${a.question}
                                    </p>
                                </label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "List":var c=a.options.map(b=>`<option value="${b.screeningQuestionOptionsID}">${b.label||b.option}</option>`);return`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                <select data-qtype="list" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""}>${c.join("")}</select>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                             </div>
                        `;case "Multiselect List":case "Multiselect Checkbox":return c=a.options.map(b=>`<label><input type="checkbox" autocomplete="nope" data-qtype="check-list" data-qid="${a.screeningQuestionID}" data-value="${b.screeningQuestionOptionsID}" />${b.label||b.option}</label>`),`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                                ${c.join("")}
                             </div>
                        `;case "Radio":return c=a.options.map(b=>`<label class="sq-question-option"><input type="radio" data-qtype="radio" name="${a.screeningQuestionID}" data-qid="${a.screeningQuestionID}" value="${b.screeningQuestionOptionsID}" ${a.isMandatory?"required":""} />${b.label||b.option}</label>`),`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>
                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                                <div class="sq-opt-list">${c.join("")}</div>
                             </div>
                        `;case "File":return`
                             <div class="input-field-container">
                                <label class="text ${a.isMandatory?"required":""}">${a.question}</label>

                                <button class="file" data-qtype="file" data-qid="${a.screeningQuestionID}" ${a.isMandatory?"required":""}>
                                    <span class="text">${h?.uploadButtonText||"Select..."}</span>
                                </button>

                                <div class="sq-file-list" data-rel="file-list"></div>

                                ${0<a.helpText?.length&&`
                                <div class="sq-help-text" ${a.isHelpTextCollapse?"collapsible":""}>
                                    <p class="text-main">${a.helpText||""}</p>
                                    <div class="section-read-more" style="text-align: ${h.readMoreAlign}">
                                        <a href="javascript: void(0);" class="button-show-more" data-rel="button-show-more">${h.showMoreHelpText}</a>
                                    </div>
                                </div>
                                `||""}
                            </div>
                        `;case "Header":return`<div class='screening-question-heading'><h3>${a.question}</h3</div>`;default:return""}};this._fileEl=a=>$(`
                    <article class="item-file">
                        <span class="text">${a.name||"(unknown)"}</span>
                        <button class="action-remove" data-rel="action-remove"><span class="text">X</span></button>
                    </article>
                `);this._pagingElements=a=>{let c=[];c.push(`<div data-rel="screening-pages" class="screening-pages-container" style="--shaz-text-align: ${h.pagingButtonAlignment}">`);0<a&&c.push(`<a href='javascript:void(0);' class="button-page-nav back" data-rel='screening-page-index' data-page='${a-1}'><span class="text">${h.prevPageButton||"Back"}</span></a>`);a<this._pages.length-1?c.push(`<a href='javascript:void(0);' class="button-page-nav forward" data-rel='screening-page-index' data-page='${a+
1}'><span class="text">${h.nextPageButton||"Next"}</span></a>`):h.showApply&&c.push(`<a href='javascript:void(0);' class="button-page-nav forward" data-rel='screening-apply'><span class="text">${h.applyButton||"Apply"}</span></a>`);if(1<this._pages.length){let b=Array(this._maxPage+1);for(let d=0;d<b.length;d++)b[d]=`<a href='javascript:void(0);' class="button-page-index ${d===a?"active":""}" data-rel='screening-page-index' data-page='${d}'></a>`;for(a=b.length;a<this._pages.length;a++)b[a]="<a href='javascript:void(0);' class=\"button-page-index disabled\"></a>";
c.push(`<div class="sq-pages-index">${b.join("")}</div>`)}c.push("</div>");return c.join("")};this._recordAnswers=()=>{k.find("input, select").each((a,c)=>{a=$(c);switch(a.attr("data-qtype")){case "text":a.val()?e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerText:a.val(),screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "number":a.val()?e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerNum:parseInt(a.val()),
screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "date":a.val()?e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerDate:a.val(),screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "bool":e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerBoolean:a.is(":checked")?1:0,screeningTemplateID:e._screeningTemplateID};break;case "list":a.val()?e._answers[a.attr("data-qid")]=
{screeningQuestionID:a.attr("data-qid"),answerUUID:a.val(),screeningTemplateID:e._screeningTemplateID}:delete e._answers[a.attr("data-qid")];break;case "check-list":c=a.attr("data-qid");let b=e._answers[c]?.answerUUID||[];a.is(":checked")?0>b.indexOf(a.attr("data-value"))&&b.push(a.attr("data-value")):0<=b.indexOf(a.attr("data-value"))&&b.splice(b.indexOf(a.attr("data-value")),1);0===b.length?delete e._answers[a.attr("data-qid")]:e._answers[c]={screeningQuestionID:a.attr("data-qid"),answerUUID:b,
screeningTemplateID:e._screeningTemplateID};break;case "radio":a.is(":checked")&&(e._answers[a.attr("data-qid")]={screeningQuestionID:a.attr("data-qid"),answerUUID:a.attr("value"),screeningTemplateID:e._screeningTemplateID})}})};this._restoreAnswers=a=>{for(let c in e._answers){let b=e._answers[c];c=c.split(":")[0];0>a.indexOf(c)||(0===k.find(`input[data-qid=${c}]:visible, select[data-qid=${c}]:visible`).length?delete e._answers[c]:b.answerText||b.answerNum?k.find(`input[data-qid=${c}]`).val(b.answerText||
b.answerNum):b.answerDate?k.find(`input[data-qid=${c}]`).val(b.answerDate.substr(0,10)):b.answerBoolean&&!b.answerUUID?k.find(`input[data-qid=${c}]`).attr("checked",!0):b.answerUUID?("string"===typeof b.answerUUID&&(b.answerUUID=b.answerUUID.split(",")),b.answerUUID.forEach(d=>{k.find(`input[data-qid=${c}][data-value=${d.trim()}]`).attr("checked",!0);k.find(`input[data-qid=${c}][value=${d.trim()}]`).attr("checked",!0);k.find(`select[data-qid=${c}]`).val(d.trim())})):b.answerFile&&k.find(`input[data-qid=${c}]`).val(this._fileBlob(b.answerFile)))}};
this._readFile=a=>new Promise(c=>{let b=new FileReader;b.addEventListener("load",()=>{c(btoa(b.result))},!1);b.readAsBinaryString(a)});this._fileBlob=(a,c="",b=512)=>{a=atob(a);const d=[];for(let g=0;g<a.length;g+=b){var f=a.slice(g,g+b);const l=Array(f.length);for(let m=0;m<f.length;m++)l[m]=f.charCodeAt(m);f=new Uint8Array(l);d.push(f)}return new Blob(d,{type:c})};this._showEditor=()=>{const a=$('\n                    <div class="dialog dialog-knockout editor-only" data-rel="dialog" data-dialog="knockout">\n                        <div class="content" data-rel="dialog-content"></div>\n\n                        <div class="buttons">\n                            <button class="submit" data-rel="button-submit"><span class="text">OK</span></button>\n                            <button class="dismiss" data-rel="button-dismiss"><span class="text">Cancel</span></button>\n                        </div>\n                    </div>\n                ').appendTo(k),
c=d=>d.knockOutDate?(new Date(d.knockOutDate)).toLocaleDateString():d.knockOutList?d.options?.find(f=>f.screeningQuestionOptionsID===d.knockOutList)?.option:d.knockOutText?d.knockOutText:d.knockOutNumber?d.knockOutNumber:null!==d.knockOutBoolean?d.knockOutBoolean?"Yes":"No":"",b=d=>`
                    <article data-rel="knockout" data-id="${d.screeningQuestionID}">
                        <div class="row">
                            <label>${d.question}</label>
                            <label>${c(d)}</label>
                        </div>

                        <div class="row">
                            <label>
                                Message
                                <input type="text" data-rel="alert" placeholder="Sorry, we can accept you at this time." value="${d.alert||""}" />
                            </label>

                            <label>
                                Redirect (Leave blank for no redirect)
                                <input type="text" data-rel="redirect" placeholder="/reject" value="${d.redirect||""}" />
                            </label>
                        </div>

                        <div class="row">
                            <label>
                                Enable
                                <input type="checkbox" data-rel="enable" ${0<d.alert?.length||0<d.redirect?.length?'checked="checked"':""} />
                            </label>
                        </div>
                    </article>
                `;0!==e._ko.length&&q.config().then(d=>{a.find("[data-rel=dialog-content]").empty().append(e._ko.map(g=>b({...g,...d?.knockout?.find(l=>l.screeningQuestionID===g.screeningQuestionID)})));k.find(".button-editor").remove();$("<button />").text("Edit Knockout Handling").addClass("button-editor").on("click",function(){a.toggle()}).prependTo(k);const f=g=>{g=$(g.target);$("<input />").attr({type:"checkbox","data-rel":"enable",checked:g.is(":checked")?"checked":null}).on("click",f).appendTo(g.parent());
g.remove()};a.find("[data-rel=enable]").on("click",f);a.find("[data-rel=button-submit]").on("click",function(){let g=d?.knockout||[];a.find("[data-rel=dialog-content] article [data-rel=enable]").each((l,m)=>{let p=$(m).parents("article");(l=g.find(r=>r.screeningQuestionID===p.attr("data-id")))&&g.splice(g.indexOf(l),1);$(m).is(":checked")&&g.push({screeningQuestionID:p.attr("data-id"),alert:p.find("[data-rel=alert]").val(),redirect:p.find("[data-rel=redirect]").val()})});q.config().then(l=>q.config({...l,
knockout:g})).then(()=>{d.knockout=g});a.toggle()});a.find("[data-rel=button-dismiss]").on("click",function(){a.toggle();a.find("[data-rel=dialog-content]").empty().append(e._ko.map(g=>b({...g,...d?.knockout?.find(l=>l.screeningQuestionID===g.screeningQuestionID)})));a.find("[data-rel=enable]").on("click",f)})})};q.log("Loading plugin: screening-questions (1.0.0)");shazamme.bag("plugin-screening-question",{message:v,version:"1.0.0"});return this._fetchQuestions().then(()=>{this._showQuestions(0,!1);
t&&this._showEditor();return Promise.resolve({nextPage:C,prevPage:D,answers:B,loadAnswers:E,knockout:F,container:k,validate:y,message:v,version:"1.0.0"})})}}})();